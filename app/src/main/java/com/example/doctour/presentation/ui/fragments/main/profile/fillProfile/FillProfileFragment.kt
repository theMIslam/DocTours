package com.example.doctour.presentation.ui.fragments.main.profile.fillProfileimport android.content.Contextimport android.widget.ArrayAdapterimport androidx.fragment.app.viewModelsimport androidx.navigation.fragment.findNavControllerimport by.kirich1409.viewbindingdelegate.viewBindingimport com.example.doctour.Rimport com.example.doctour.base.BaseFragmentimport com.example.doctour.databinding.FragmentProfileFillBindingimport com.example.doctour.preferences.ProfilePreferencesimport com.example.doctour.presentation.module.showToastimport com.example.doctour.presentation.ui.fragments.main.profile.ProfileViewModelimport dagger.hilt.android.AndroidEntryPointimport javax.inject.Inject@AndroidEntryPointclass FillProfileFragment : BaseFragment<FragmentProfileFillBinding, ProfileViewModel>(    R.layout.fragment_profile_fill) {    override val binding: FragmentProfileFillBinding by viewBinding(FragmentProfileFillBinding::bind)    override val viewModel: ProfileViewModel by viewModels()    @Inject    lateinit var profilePreferences: ProfilePreferences    override fun initialize() {        super.initialize()        checking()    }    override fun initSubscribers() {        super.initSubscribers()        viewModel.getUserProfileById.collectUiStateBema(            onSuccess = {                viewModel.getProfileById(id = it.id)                profilePreferences.saveID(it.id)                binding.etFio.setText(it.fullname)                binding.etNumber.setText(it.phone_number)                binding.etData.setText(it.birthday)                binding.tilGender.hint = it.gender            },            onError = {                showToast(it)            }        )    }    override fun initListeners() {        super.initListeners()        binding.tvArrowBack.setOnClickListener {            findNavController().navigateUp()        }        setDropDownMenu()        binding.btnSave.setOnClickListener {            profilePreferences.saveName(binding.etFio.text.toString())            profilePreferences.savePhone(binding.etNumber.text.toString())            profilePreferences.saveBirthday(binding.etData.text.toString())            profilePreferences.saveGender(binding.actvGender.text.toString())            showToast("Сохранено")            putSharedData()        }        binding.etFio.setText(profilePreferences.getName())        binding.etNumber.setText(profilePreferences.getPhone())        binding.etData.setText(profilePreferences.getBirthday())        // binding.actvGender.setText(profilePreferences.getGender())    }    private fun putSharedData() {        val shared = activity?.getSharedPreferences("preferences_profile", Context.MODE_PRIVATE)        val nicdata = binding.etFio.text.toString()        val editor = shared?.edit()        editor?.putString("fio", nicdata)        editor?.apply()        editor?.commit()    }    private fun setDropDownMenu() {        val gender = arrayOf("Женский", "Мужской", "Другое")        val arrayAdapter = ArrayAdapter(requireActivity(), R.layout.item_dropdown, gender)        binding.actvGender.setAdapter(arrayAdapter)    }    private fun checking() {        binding.etNumber.setText(profilePreferences.getPhone())    }}